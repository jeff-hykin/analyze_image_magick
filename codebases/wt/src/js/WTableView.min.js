WT_DECLARE_WT_MEMBER(1,JavaScriptConstructor,"WTableView",function(n,i,d,G,m,r,H){function I(b){return V?g.isGecko?-b.scrollLeft:b.scrollWidth-b.clientWidth-b.scrollLeft:b.scrollLeft}function W(){if(d.clientWidth&&d.clientHeight&&z===0&&(d.scrollTop<B||d.scrollTop>C||d.scrollLeft<D||d.scrollLeft>E))n.emit(i,"scrolled",Math.round(I(d)),Math.round(d.scrollTop),Math.round(d.clientWidth),Math.round(d.clientHeight))}function X(b){return $(b.el).hasClass(H)}function x(b){var a=-1,c=-1,e=false,j=false,f=
null;for(b=g.target(b);b;){var h=$(b);if(h.hasClass("Wt-tv-contents"))break;else if(h.hasClass("Wt-tv-c")){if(b.getAttribute("drop")==="true")j=true;if(h.hasClass(H))e=true;f=b;b=b.parentNode;a=b.className.split(" ")[0].substring(7)*1;c=h.index();break}b=b.parentNode}return{columnId:a,rowIdx:c,selected:e,drop:j,el:f}}function J(){return g.pxself(d.firstChild,"lineHeight")}function A(b){var a,c,e=b.parentNode.childNodes;a=0;for(c=e.length;a<c;++a)if(e[a]==b)return a;return-1}function Y(b,a){var c=
$(document.body).hasClass("Wt-rtl");if(c)a=-a;var e=b.className.split(" ")[0],j=e.substring(7)*1,f=b.parentNode,h=f.parentNode!==m,k=h?r.firstChild:d.firstChild,l=k.firstChild;e=$(k).find("."+e).get(0);var o=b.nextSibling,p=e.nextSibling,u=g.pxself(b,"width")-1+a,y=g.pxself(f,"width")+a+"px";f.style.width=k.style.width=l.style.width=y;if(h){r.style.width=y;r.firstChild.style.width=y;d.style.left=y;m.style.left=y}b.style.width=u+1+"px";e.style.width=u+7+"px";for(n.layouts2.adjust(i.childNodes[0].id,
[[1,1]]);o;o=o.nextSibling)if(p){if(c)p.style.right=g.pxself(p,"right")+a+"px";else p.style.left=g.pxself(p,"left")+a+"px";p=p.nextSibling}n.emit(i,"columnResized",j,parseInt(u));Z.autoJavaScript()}function K(b,a){n.emit(i,{name:"itemTouchSelectEvent",eventObject:b,event:a})}function M(b,a,c){if(c){c=document.createElement("div");c.className="Wt-drop-site-"+a;b.style.position="relative";b.appendChild(c);b.dropVisual=c}else{b.style.position="";b.dropVisual.remove();b.dropVisual=undefined}}function N(b,
a,c){if(b==-1)M(m,"bottom",c);else{if(a==="top")if(b>0){b-=1;a="bottom"}for(var e=d.firstChild.firstChild,j=0;j<e.childNodes.length;j++){col=e.childNodes[j];M(col.childNodes[b],a,c)}}}function aa(){var b=d.firstChild.firstChild.firstChild;return b?b.childNodes.length:0}i.wtObj=this;var Z=this,g=n.WT,V=$(document.body).hasClass("Wt-rtl"),D=0,E=0,B=0,C=0,z=0,O=G===0,P=false,Q=false,w=0,q=0,S=0,T=0;this.onContentsContainerScroll=function(){q=m.scrollLeft=d.scrollLeft;w=r.scrollTop=d.scrollTop;W()};d.wtResize=
function(b,a,c){if(!O){b.scrollTop=G;b.onscroll();O=true}if(a-S>(E-D)/2||c-T>(C-B)/2){S=a;T=c;a=b.clientHeight==b.firstChild.offsetHeight?-1:b.clientHeight;n.emit(i,"scrolled",Math.round(I(b)),Math.round(b.scrollTop),Math.round(b.clientWidth),Math.round(a))}};var U=null;this.mouseDown=function(b,a){g.capture(null);var c=x(a);if(!a.ctrlKey&&!a.shiftKey){var e={ctrlKey:a.ctrlKey,shiftKey:a.shiftKey,target:a.target,srcElement:a.srcElement,type:a.type,which:a.which,touches:a.touches,changedTouches:a.changedTouches,
pageX:a.pageX,pageY:a.pageY,clientX:a.clientX,clientY:a.clientY};U=setTimeout(function(){i.getAttribute("drag")==="true"&&X(c)&&n._p_.dragStart(i,e)},400)}};this.mouseUp=function(){clearTimeout(U)};this.resizeHandleMDown=function(b,a){var c=b.parentNode,e=-(g.pxself(c,"width")-1),j=1E4;if($(document.body).hasClass("Wt-rtl")){var f=e;e=-j;j=-f}new g.SizeHandle(g,"h",b.offsetWidth,i.offsetHeight,e,j,"Wt-hsh2",function(h){Y(c,h)},b,i,a,-2,-1)};var s,F=0;this.touchStart=function(b,a){x(a);if(a.touches.length>
1){clearTimeout(s);s=setTimeout(function(){K(b,a)},1E3);F=a.touches.length}else{clearTimeout(s);s=setTimeout(function(){K(b,a)},50);F=1}};this.touchMove=function(b,a){a.touches.length==1&&s&&clearTimeout(s)};this.touchEnd=function(){s&&F!=1&&clearTimeout(s)};this.scrolled=function(b,a,c,e){D=b;E=a;B=c;C=e};this.resetScroll=function(){m.scrollLeft=q;d.scrollLeft=q;d.scrollTop=w;r.scrollTop=w};this.setScrollToPending=function(){z+=1};this.scrollToPx=function(b,a){w=a;q=b;this.resetScroll()};this.scrollTo=
function(b,a,c){if(z>0)z-=1;if(a!=-1){b=d.scrollTop;var e=d.clientHeight;if(c==0)if(b+e<a)c=1;else if(a<b)c=2;switch(c){case 1:d.scrollTop=a;break;case 2:d.scrollTop=a-(e-J());break;case 3:d.scrollTop=a-(e-J())/2;break}d.onscroll()}};this.setItemDropsEnabled=function(b){P=b};this.setRowDropsEnabled=function(b){Q=b};var t=null,v=null;i.handleDragDrop=function(b,a,c,e,j){if(t){t.className=t.classNameOrig;t=null}if(v){N(v.row,v.side,false);v=null}if(b!="end"){var f=x(c);if(!f.selected&&f.drop&&P)if(b==
"drop")n.emit(i,{name:"dropEvent",eventObject:a,event:c},f.rowIdx,f.columnId,e,j);else{a.className="Wt-valid-drop";t=f.el;t.classNameOrig=t.className;t.className+=" Wt-drop-site"}else if(!f.selected&&Q){if(!f.columnId){f.el=null;f.rowIdx=-1}var h=f.rowIdx,k=f.columnId,l="bottom";if(f.el)l=g.widgetCoordinates(f.el,c).y-f.el.clientHeight/2<=0?"top":"bottom";if(b=="drop")n.emit(i,{name:"rowDropEvent",eventObject:a,event:c},h,k,e,j,l);else{a.className="Wt-valid-drop";v={row:f.el?h:aa()-1,side:l};N(v.row,
v.side,true)}}else a.className=""}};this.onkeydown=function(b){var a=b||window.event;if(a.keyCode==9){g.cancelEvent(a);var c=x(a);if(c.el){b=c.el.parentNode;c=A(c.el);var e=A(b),j=b.parentNode.childNodes.length,f=b.childNodes.length;a=a.shiftKey;for(var h=false,k=c,l;;){for(;a?k>=0:k<f;k=a?k-1:k+1)for(l=k==c&&!h?a?e-1:e+1:a?j-1:0;a?l>=0:l<j;l=a?l-1:l+1){if(k==c&&l==e)return;b=b.parentNode.childNodes[l];var o=$(b.childNodes[k]).find(":input");if(o.size()>0){setTimeout(function(){o.focus();o.select()},
0);return}}k=a?f-1:0;h=true}}}else if(a.keyCode>=37&&a.keyCode<=40){h=g.target(a);function p(u){return g.hasTag(u,"INPUT")&&u.type=="text"||g.hasTag(u,"TEXTAREA")}if(!g.hasTag(h,"SELECT")){c=x(a);if(c.el){b=c.el.parentNode;c=A(c.el);e=A(b);j=b.parentNode.childNodes.length;f=b.childNodes.length;switch(a.keyCode){case 39:if(p(h)){k=g.getSelectionRange(h);if(k.start!=h.value.length)return}e++;break;case 38:c--;break;case 37:if(p(h)){k=g.getSelectionRange(h);if(k.start!=0)return}e--;break;case 40:c++;
break;default:return}g.cancelEvent(a);if(c>-1&&c<f&&e>-1&&e<j){b=b.parentNode.childNodes[e];o=$(b.childNodes[c]).find(":input");o.size()>0&&setTimeout(function(){o.focus()},0)}}}}};this.autoJavaScript=function(){if(i.parentNode==null){i=d=m=null;this.autoJavaScript=function(){}}else if(!g.isHidden(i)){if(!g.isIE&&(w!=d.scrollTop||q!=d.scrollLeft)){if(typeof q==="undefined")if(a&&g.isGecko)m.scrollLeft=d.scrollLeft=q=0;else q=d.scrollLeft;else m.scrollLeft=d.scrollLeft=q;r.scrollTop=d.scrollTop=w}a=
i.offsetWidth-g.px(i,"borderLeftWidth")-g.px(i,"borderRightWidth");var b=d.offsetWidth-d.clientWidth;a-=r.clientWidth;if(a>200&&a!=d.tw){d.tw=a;d.style.width=a+"px";m.style.width=a-b+"px"}var a=$(document.body).hasClass("Wt-rtl");if(a)m.style.marginLeft=b+"px";else m.style.marginRight=b+"px";b=d.offsetHeight-d.clientHeight;if((a=r.style)&&a.marginBottom!==b+"px"){a.marginBottom=b+"px";n.layouts2.adjust(i.childNodes[0].id,[[1,0]])}}}});
