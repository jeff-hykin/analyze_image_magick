WT_DECLARE_WT_MEMBER(1,JavaScriptConstructor,"WTreeView",function(l,d,i,x,s,G){function q(a){var b=-1,c=null,e=false,h=false,g=null;for(a=f.target(a);a&&a!=d;){if(f.hasTag(a,"LI")){if(b==-1)b=0;c=a.id;break}else if(a.className&&a.className.indexOf("Wt-tv-c")==0){if(a.className.indexOf("Wt-tv-c")==0)b=a.className.split(" ")[0].substring(7)*1;else if(b==-1)b=0;if(a.getAttribute("drop")==="true")h=true;g=a}if($(a).hasClass(G))e=true;a=a.parentNode}return{columnId:b,nodeId:c,selected:e,drop:h,el:g}}function A(a,
b,c){var e=q(b);e.columnId!=-1&&l.emit(d,{name:"itemTouchEvent",eventObject:a,event:b},e.nodeId+":"+e.columnId,c)}function B(){if(t&&C)if(!f.isHidden(d)){t=false;var a=y.firstChild,b=p.firstChild,c=0,e=0,h=p.lastChild.className.split(" ")[0];e=f.getCssRule("#"+d.id+" ."+h);if(s)b=b.firstChild;for(var g=0,j=b.childNodes.length;g<j;++g)if(b.childNodes[g].className){var k=b.childNodes[g].className.split(" ")[0];k=f.getCssRule("#"+d.id+" ."+k);if(k.style.display!="none")c+=f.pxself(k,"width")+7}if(!s){if(f.isIE&&
$(document.body).hasClass("Wt-rtl"))if(g=f.getCssRule("#"+d.id+" .Wt-tv-row"))g.style.width=c+"px";if(e.style.width)$(d).find(".Wt-headerdiv ."+h).css("width",e.style.width);else{h=d.scrollWidth-b.offsetWidth-9-15;if(h>0)e.style.width=h+"px"}}if(e.style.width!="auto"){e=c+f.pxself(e,"width")+(f.isIE6?10:7);if(s){k=f.getCssRule("#"+d.id+" .Wt-tv-rowc");k.style.width=c+"px";u.wtResize();l.layouts2&&l.layouts2.adjust();f.isIE&&setTimeout(function(){$(d).find(".Wt-tv-rowc").css("width",c+"px").css("width",
"")},0);d.changed=true}else{p.style.width=a.style.width=e+"px";b.style.width=c+"px"}}}}function H(a,b){if(b==="top"){var c=a.previousSibling;if(c){a=c;b="bottom"}}c=document.createElement("div");c.className="Wt-drop-site-"+b;a.style.position="relative";a.appendChild(c);a.dropVisual=c;v=a}function I(a){a.style.position="";a.dropVisual.remove();a.dropVisual=undefined}d.wtObj=this;var y=i.firstChild,p=x.firstChild,u=this,f=l.WT,C=false,D=false,E=false;this.click=function(a,b){var c=q(b);c.columnId!=
-1&&l.emit(d,{name:"itemEvent",eventObject:a,event:b},c.nodeId+":"+c.columnId,"clicked","","")};this.dblClick=function(a,b){var c=q(b);c.columnId!=-1&&l.emit(d,{name:"itemEvent",eventObject:a,event:b},c.nodeId+":"+c.columnId,"dblclicked","","")};this.mouseDown=function(a,b){f.capture(null);var c=q(b);if(c.columnId!=-1){l.emit(d,{name:"itemEvent",eventObject:a,event:b},c.nodeId+":"+c.columnId,"mousedown","","");d.getAttribute("drag")==="true"&&c.selected&&l._p_.dragStart(d,b)}};this.mouseUp=function(a,
b){var c=q(b);c.columnId!=-1&&l.emit(d,{name:"itemEvent",eventObject:a,event:b},c.nodeId+":"+c.columnId,"mouseup","","")};var m;this.touchStart=function(a,b){if(b.touches.length>1){clearTimeout(m);m=setTimeout(function(){A(a,b,"touchselect")},1E3)}else{clearTimeout(m);m=setTimeout(function(){A(a,b,"touchselect")},50)}};this.touchMove=function(a,b){b.touches.length==1&&m&&clearTimeout(m)};this.touchEnd=function(){m&&clearTimeout(m)};this.rootClick=function(a,b){l.emit(d,{name:"itemEvent",eventObject:a,
event:b},"","clicked","","")};this.rootDblClick=function(a,b){l.emit(d,{name:"itemEvent",eventObject:a,event:b},"","dblclicked","","")};this.rootMouseDown=function(a,b){l.emit(d,{name:"itemEvent",eventObject:a,event:b},"","mousedown","","")};this.rootMouseUp=function(a,b){l.emit(d,{name:"itemEvent",eventObject:a,event:b},"","mouseup","","")};this.resizeHandleMDown=function(a,b){var c=a.parentNode.className.split(" ")[0];if(c){var e=f.getCssRule("#"+d.id+" ."+c),h=f.pxself(e,"width"),g=-h,j=1E4,k=
$(document.body).hasClass("Wt-rtl");if(k){var z=g;g=-j;j=-z}new f.SizeHandle(f,"h",a.offsetWidth,d.offsetHeight,g,j,"Wt-hsh2",function(n){n=h+(k?-n:n);var r=c.substring(7)*1;e.style.width=n+"px";u.adjustColumns();l.emit(d,"columnResized",r,parseInt(n))},a,d,b,-2,-1)}};var t=false;this.adjustColumns=function(){if(!t){t=true;setTimeout(B,0)}};this.setItemDropsEnabled=function(a){D=a};this.setRowDropsEnabled=function(a){E=a};var o=null,v=null;d.handleDragDrop=function(a,b,c,e,h){if(o){o.className=o.classNameOrig;
o=null}if(v){I(v);v=null}if(a!="end"){var g=q(c);if(!g.selected&&g.drop&&D&&g.columnId!=-1)if(a=="drop")l.emit(d,{name:"itemEvent",eventObject:b,event:c},g.nodeId+":"+g.columnId,"drop",e,h);else{b.className="Wt-valid-drop";o=g.el;o.classNameOrig=o.className;o.className+=" Wt-drop-site"}else if(!g.selected&&E){var j,k="bottom";if(g.nodeId){j=$("#"+g.nodeId)[0];k=f.widgetCoordinates(j,c).y-j.clientHeight/2<=0?"top":"bottom"}else{j=i.getElementsByClassName("Wt-tv-root");j=j.length==1?j[0].lastChild:
x}if(a=="drop")l.emit(d,{name:"rowDropEvent",eventObject:b,event:c},g.nodeId+":"+g.columnId,e,h,k);else{b.className="Wt-valid-drop";H(j,k)}}else b.className=""}};this.wtResize=function(){C=true;B();var a=$(d),b,c=null,e=f.pxself(d,"width");if(e==0)e=d.clientWidth;else if(f.boxSizing(d)){e-=f.px(d,"borderLeftWidth");e-=f.px(d,"borderRightWidth")}var h=i.offsetWidth-i.clientWidth;if(h>50)h=0;if(i.clientWidth>0)e-=h;if(a.hasClass("column1")){b=a.find(".Wt-headerdiv").get(0).lastChild.className.split(" ")[0];
b=f.getCssRule("#"+d.id+" ."+b);c=f.pxself(b,"width")}if((!f.isIE||e>100)&&(e!=i.tw||c!=i.c0w||d.changed)){var g=!d.changed;i.tw=e;i.c0w=c;b=a.find(".Wt-headerdiv").get(0).lastChild.className.split(" ")[0];b=f.getCssRule("#"+d.id+" ."+b);var j=y.firstChild,k=f.getCssRule("#"+d.id+" .cwidth"),z=k.style.width==j.offsetWidth+1+"px",n=p.firstChild;k.style.width=e+"px";i.style.width=e+h+"px";if(!$(document.body).hasClass("Wt-rtl")){x.style.marginRight=h+"px";$("#"+d.id+" .Wt-scroll").css("marginRight",
h+"px")}if(c!=null){c=e-c-(f.isIE6?10:7);if(c>0){var r=Math.min(c,f.pxself(f.getCssRule("#"+d.id+" .Wt-tv-rowc"),"width"));e-=c-r;p.style.width=e+"px";j.style.width=e+"px";f.getCssRule("#"+d.id+" .Wt-tv-row").style.width=r+"px";f.isIE&&setTimeout(function(){a.find(" .Wt-tv-row").css("width",r+"px").css("width","")},0)}}else if(z){p.style.width=k.style.width;j.style.width=k.style.width}else p.style.width=j.offsetWidth+"px";if(!s&&j.offsetWidth-n.offsetWidth>=7)b.style.width=j.offsetWidth-n.offsetWidth-
7+"px";d.changed=false;g&&u.adjustColumns()}};this.scrollTo=function(a,b,c,e){if(b!=-1){b*=c;a=i.scrollTop;var h=i.clientHeight;if(e==0)if(a+h<b)e=1;else if(b<a)e=2;switch(e){case 1:i.scrollTop=b;break;case 2:i.scrollTop=b-(h-c);break;case 3:i.scrollTop=b-(h-c)/2;break}window.fakeEvent={object:i};i.onscroll(window.fakeEvent);window.fakeEvent=null}};var w;this.setRowHeight=function(a){w=a};var F=function(){if(w!=0)y.children[0].children[0].style.backgroundPosition="0px "+Math.floor(i.scrollTop/(2*
w))*2*w+"px"};if(i.addEventListener)i.addEventListener("scroll",F);else i.attachEvent&&i.attachEvent("onscroll",F);u.adjustColumns()});
